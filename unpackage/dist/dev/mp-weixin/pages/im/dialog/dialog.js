(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/im/dialog/dialog"],{189:
/*!*****************************************************************************************************!*\
  !*** D:/Users/Ryan/Documents/HBuilderProjects/team/main.js?{"page":"pages%2Fim%2Fdialog%2Fdialog"} ***!
  \*****************************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";(function(i){e(/*! uni-pages */4);n(e(/*! vue */2));var t=n(e(/*! ./pages/im/dialog/dialog.vue */190));function n(i){return i&&i.__esModule?i:{default:i}}i(t.default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},190:
/*!********************************************************************************!*\
  !*** D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue ***!
  \********************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";e.r(t);var n=e(/*! ./dialog.vue?vue&type=template&id=69c14686& */191),g=e(/*! ./dialog.vue?vue&type=script&lang=js& */193);for(var s in g)"default"!==s&&function(i){e.d(t,i,(function(){return g[i]}))}(s);e(/*! ./dialog.vue?vue&type=style&index=0&lang=scss& */195);var r,a=e(/*! ../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */12),f=Object(a["default"])(g["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);f.options.__file="pages/im/dialog/dialog.vue",t["default"]=f.exports},191:
/*!***************************************************************************************************************!*\
  !*** D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue?vue&type=template&id=69c14686& ***!
  \***************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(i,t,e){"use strict";e.r(t);var n=e(/*! -!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dialog.vue?vue&type=template&id=69c14686& */192);e.d(t,"render",(function(){return n["render"]})),e.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),e.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),e.d(t,"components",(function(){return n["components"]}))},192:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue?vue&type=template&id=69c14686& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(i,t,e){"use strict";var n;e.r(t),e.d(t,"render",(function(){return g})),e.d(t,"staticRenderFns",(function(){return r})),e.d(t,"recyclableRender",(function(){return s})),e.d(t,"components",(function(){return n}));try{n={uToast:function(){return e.e(/*! import() | uview-ui/components/u-toast/u-toast */"uview-ui/components/u-toast/u-toast").then(e.bind(null,/*! @/uview-ui/components/u-toast/u-toast.vue */197))},uNavbar:function(){return e.e(/*! import() | uview-ui/components/u-navbar/u-navbar */"uview-ui/components/u-navbar/u-navbar").then(e.bind(null,/*! @/uview-ui/components/u-navbar/u-navbar.vue */324))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var g=function(){var i=this,t=i.$createElement;i._self._c},s=!1,r=[];g._withStripped=!0},193:
/*!*********************************************************************************************************!*\
  !*** D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";e.r(t);var n=e(/*! -!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dialog.vue?vue&type=script&lang=js& */194),g=e.n(n);for(var s in n)"default"!==s&&function(i){e.d(t,i,(function(){return n[i]}))}(s);t["default"]=g.a},194:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=g(e(/*! ./node_modules/@babel/runtime/regenerator */21));function g(i){return i&&i.__esModule?i:{default:i}}function s(i,t,e,n,g,s,r){try{var a=i[s](r),f=a.value}catch(o){return void e(o)}a.done?t(f):Promise.resolve(f).then(n,g)}function r(i){return function(){var t=this,e=arguments;return new Promise((function(n,g){var r=i.apply(t,e);function a(i){s(r,n,g,a,f,"next",i)}function f(i){s(r,n,g,a,f,"throw",i)}a(void 0)}))}}var a={data:function(){return{durationPullDownRefresh:500,refresh_status:!1,info:{},friendName:"阮阮",background:{background:"url(https://stea.ryanalexander.cn/navbar/22.jpg) no-repeat",backgroundSize:"100% 100%"},color:{color:"#f5f5f5"},textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,RECORDER:i.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:i.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null}}},onLoad:function(i){var t=this;this.info=getApp().globalData.info,this.getMsgList(),this.AUDIO.onEnded((function(i){t.playMsgid=null})),this.RECORDER.onStart((function(i){t.recordBegin(i)})),this.RECORDER.onStop((function(i){t.recordEnd(i)}))},onShow:function(){var t=this;this.scrollTop=9999999,i.getStorage({key:"redEnvelopeData",success:function(e){console.log(e.data);var n=new Date,g=t.msgList[t.msgList.length-1].msg.id;g++;var s={type:"user",msg:{id:g,type:"redEnvelope",time:n.getHours()+":"+n.getMinutes(),userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{blessing:e.data.blessing,rid:Math.floor(1e3*Math.random()+1),isReceived:!1}}};t.screenMsg(s),i.removeStorage({key:"redEnvelopeData"})}})},methods:{setHint:function(i){this.$refs.uToast.show({title:i,duration:this.durationPullDownRefresh})},navigate:function(t){i.navigateTo({url:t,success:function(i){},fail:function(){},complete:function(){}})},screenMsg:function(t){if("system"==t.type)switch(t.msg.type){case"text":this.addSystemTextMsg(t);break;case"redEnvelope":this.addSystemRedEnvelopeMsg(t);break}else if("user"==t.type){switch(t.msg.type){case"text":this.addTextMsg(t);break;case"voice":this.addVoiceMsg(t);break;case"img":this.addImgMsg(t);break;case"redEnvelope":this.addRedEnvelopeMsg(t);break}console.log("用户消息"),t.msg.userinfo.uid!=this.myuid&&(console.log("振动"),i.vibrateLong())}this.$nextTick((function(){this.scrollToView="msg"+t.msg.id}))},getHistory:function(){return new Promise((function(i,t){setTimeout((function(){var i=[{type:"user",msg:{id:1,type:"text",time:"12:56",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{text:"为什么温度会相差那么大？"}}},{type:"user",msg:{id:2,type:"text",time:"12:57",userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:{text:"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。"}}},{type:"user",msg:{id:3,type:"voice",time:"12:59",userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:{url:"/static/voice/1.mp3",length:"00:06"}}},{type:"user",msg:{id:4,type:"voice",time:"13:05",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{url:"/static/voice/2.mp3",length:"00:06"}}}];t(i)}),1e3)}))},loadHistory:function(i){var t=this;return r(n.default.mark((function i(){var e,g,s;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t.isHistoryLoading){i.next=2;break}return i.abrupt("return");case 2:return t.isHistoryLoading=!0,t.scrollAnimation=!1,e=t.msgList[0].msg.id,i.prev=5,i.next=8,t.getHistory();case 8:for(g=i.sent,s=0;s<g.length;s++)"user"==g[s].type&&"img"==g[s].msg.type&&(g[s].msg.content=t.setPicSize(g[s].msg.content),t.msgImgList.unshift(g[s].msg.content.url)),g[s].msg.id=Math.floor(1e3*Math.random()+1),t.msgList.unshift(g[s]);i.next=16;break;case 12:i.prev=12,i.t0=i["catch"](5),console.log(i.t0),t.setHint("没有别的消息啦");case 16:return i.prev=16,t.scrollAnimation=!0,setTimeout((function(){t.scrollToView="msg"+e}),t.durationPullDownRefresh),t.scrollToView="",t.isHistoryLoading=!1,i.finish(16);case 22:case"end":return i.stop()}}),i,null,[[5,12,16,22]])})))()},getMsgList:function(){for(var i=[{type:"system",msg:{id:0,type:"text",content:{text:"欢迎进入HM-chat聊天室"}}},{type:"user",msg:{id:1,type:"text",time:"12:56",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{text:"为什么温度会相差那么大？"}}},{type:"user",msg:{id:2,type:"text",time:"12:57",userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:{text:"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。"}}},{type:"user",msg:{id:3,type:"voice",time:"12:59",userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:{url:"/static/voice/1.mp3",length:"00:06"}}},{type:"user",msg:{id:4,type:"voice",time:"13:05",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{url:"/static/voice/2.mp3",length:"00:06"}}},{type:"user",msg:{id:5,type:"img",time:"13:05",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{url:"/static/img/p10.jpg",w:200,h:200}}},{type:"user",msg:{id:6,type:"img",time:"12:59",userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:{url:"/static/img/q.jpg",w:1920,h:1080}}},{type:"system",msg:{id:7,type:"text",content:{text:"欢迎进入HM-chat聊天室"}}},{type:"system",msg:{id:9,type:"redEnvelope",content:{text:"售后客服008领取了你的红包"}}},{type:"user",msg:{id:10,type:"redEnvelope",time:"12:56",userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:{blessing:"恭喜发财，大吉大利，万事如意",rid:0,isReceived:!1}}},{type:"user",msg:{id:11,type:"redEnvelope",time:"12:56",userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:{blessing:"恭喜发财",rid:1,isReceived:!1}}}],t=0;t<i.length;t++)"user"==i[t].type&&"img"==i[t].msg.type&&(i[t].msg.content=this.setPicSize(i[t].msg.content),this.msgImgList.push(i[t].msg.content.url));this.msgList=i,this.$nextTick((function(){this.scrollTop=9999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(t){var e=i.upx2px(350),n=i.upx2px(350);if(t.w>e||t.h>n){var g=t.w/t.h;t.w=g>1?e:n*g,t.h=g>1?e/g:n}return t},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var i=this;this.popupLayerClass="",setTimeout((function(){i.hideMore=!0,i.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){i.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(t){var e=this;this.hideDrawer(),i.chooseImage({sourceType:[t],sizeType:["original","compressed"],success:function(t){for(var n=function(n){i.getImageInfo({src:t.tempFilePaths[n],success:function(i){console.log(i.width),console.log(i.height);var g={url:t.tempFilePaths[n],w:i.width,h:i.height};e.sendMsg(g,"img")}})},g=0;g<t.tempFilePaths.length;g++)n(g)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(i){this.textMsg+=i.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var i=this.replaceEmoji(this.textMsg),t={text:i};this.sendMsg(t,"text"),this.textMsg=""}},replaceEmoji:function(i){var t=this,e=i.replace(/\[([^(\]|\[)]*)\]/g,(function(i,e){console.log("item: "+i);for(var n=0;n<t.emojiList.length;n++)for(var g=t.emojiList[n],s=0;s<g.length;s++){var r=g[s];if(r.alt==i){var a="https://s2.ax1x.com/2019/04/12/",f='<img src="'+a+t.onlineEmoji[r.url]+'">';return console.log("imgstr: "+f),f}}}));return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+e+"</div>"},sendMsg:function(i,t){var e=this,n=new Date,g=this.msgList[this.msgList.length-1].msg.id;g++;var s={type:"user",msg:{id:g,time:n.getHours()+":"+n.getMinutes(),type:t,userinfo:{uid:0,username:"大黑哥",face:"/static/img/face.jpg"},content:i}};this.screenMsg(s),setTimeout((function(){g=e.msgList[e.msgList.length-1].msg.id,g++,s={type:"user",msg:{id:g,time:n.getHours()+":"+n.getMinutes(),type:t,userinfo:{uid:1,username:"售后客服008",face:"/static/img/im/face/face_2.jpg"},content:i}},e.screenMsg(s)}),3e3)},addTextMsg:function(i){this.msgList.push(i)},addVoiceMsg:function(i){this.msgList.push(i)},addImgMsg:function(i){i.msg.content=this.setPicSize(i.msg.content),this.msgImgList.push(i.msg.content.url),this.msgList.push(i)},addRedEnvelopeMsg:function(i){this.msgList.push(i)},addSystemTextMsg:function(i){this.msgList.push(i)},addSystemRedEnvelopeMsg:function(i){this.msgList.push(i)},openRedEnvelope:function(t,e){var n=this,g=t.content.rid;i.showLoading({title:"加载中..."}),console.log("index: "+e),setTimeout((function(){0==g?n.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},t.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(t.userinfo.uid==n.myuid?"自己":t.userinfo.username)+"的红包"},"redEnvelope"),console.log("this.msgList[index]: "+JSON.stringify(n.msgList[e])),n.msgList[e].msg.content.isReceived=!0)),i.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var i=this;this.windowsState="hide",setTimeout((function(){i.windowsState=""}),200)},sendSystemMsg:function(i,t){var e=this.msgList[this.msgList.length-1].msg.id;e++;var n={type:"system",msg:{id:e,type:t,content:i}};this.screenMsg(n)},toDetails:function(t){i.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){i.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(i){this.playMsgid=i.id,this.AUDIO.src=i.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(i){i.touches.length>1||(this.initPoint.Y=i.touches[0].clientY,this.initPoint.identifier=i.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(i){var t=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){t.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=i.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(i){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(i){if(clearInterval(this.recordTimer),this.willStop)console.log("取消发送录音");else{console.log("e: "+JSON.stringify(i));var t={length:0,url:i.tempFilePath},e=parseInt(this.recordLength/60),n=this.recordLength%60;e=e<10?"0"+e:e,n=n<10?"0"+n:n,t.length=e+":"+n,this.sendMsg(t,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};t.default=a}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},195:
/*!******************************************************************************************************************!*\
  !*** D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue?vue&type=style&index=0&lang=scss& ***!
  \******************************************************************************************************************/
/*! no static exports found */function(i,t,e){"use strict";e.r(t);var n=e(/*! -!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dialog.vue?vue&type=style&index=0&lang=scss& */196),g=e.n(n);for(var s in n)"default"!==s&&function(i){e.d(t,i,(function(){return n[i]}))}(s);t["default"]=g.a},196:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Users/Ryan/Documents/HBuilderProjects/team/pages/im/dialog/dialog.vue?vue&type=style&index=0&lang=scss& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(i,t,e){}},[[189,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/im/dialog/dialog.js.map